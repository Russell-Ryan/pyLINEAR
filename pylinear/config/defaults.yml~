# Configuration for pyLINEAR

cpu: &CPU
  ncpu: 1                                # number of processors to use
  verbose: true

calib: &CALIB
  h5conf: hst_wfc3_ir_beams.h5           # HDF5 file for beam info
  h5flat: null                           # HDF5 file for flat field
  h5siaf: hst_wfc3_ir_detector.h5        # HDF5 file for detectors
  
  
tables: &TABLES
  path: TABLES/                          # relative path for the tables
  remake: true
  gzip: true                             # gzip the resulting data
  nsub: 5                                # number of intervals for TrapZ
  cpu: *CPU                              # import CPU settings
  
sources:
  segmap: seg.fits                       # segmentation map for sources
  obslst: obs.lst                        # file describing the bands
  detindex: 0                            # detection index in obslst
  maglim: 26.                            # magnitude limit of sources

modules:
  simulation:
    perform: false
    beam: A
    grism: G102
    imgtype: wcs   # wcs or img
    gzip: true
    imglst: wcs.lst
    sedlst: sed.lst
    noise:
      perform: false
      exptime: 700.
      skyrate: 0.3
    cpu: *CPU
    calib: *CALIB
    tables: *TABLES

  extraction:
    perform: true 
    mode: golden
    logdamp: [-6.,-1.,0.1]
    outroot: test
    imglst: flt.lst
    beam: A
    mask: null
    lamb0: 7500.
    lamb1: 12500.
    dlamb: 25.
    lsqr:
      atol: 1e-10
      btol: 1e-10
      conlim: 1e10
      maxiter: 1e5
    cpu: *CPU
    calib: *CALIB
    tables: *TABLES
    mcmcunc:
      perform: false
      nwalkers: 100
      nstep: 100
      burn: 0.2
    residuals:
      perform: true
      gzip: false
          
  cutout:
    perform: false
    beam: A
    grism: G102
    imglst: flt.lst
    padding: [0,2]
    cpu: *CPU
    calib: *CALIB

